<!DOCTYPE html>
<html lang="en" data-mode="human">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>BlackReaper â€¢ Battle</title>
  <link rel="stylesheet" href="/assets/css/theme.css"/>
  <link rel="stylesheet" href="/assets/css/base.css"/>
  <link rel="stylesheet" href="/assets/css/components.css"/>
  <style>
    header.app { display:flex; align-items:center; justify-content:space-between; padding:.75rem 1rem; gap:1rem; position:sticky; top:0; background:var(--bg); border-bottom:1px solid var(--ring); z-index:10; }
    main { padding:1rem; display:grid; gap:1.25rem; max-width:820px; margin:0 auto; }
    .panel { background:var(--card); border:1px solid var(--ring); padding:1rem 1.1rem; border-radius:16px; display:flex; flex-direction:column; gap:.7rem; }
    .row { display:flex; align-items:center; gap:.6rem; }
    .statline { font-size:.7rem; opacity:.75; display:flex; gap:.9rem; flex-wrap:wrap; }
    .log { background:#00000010; border:1px solid var(--ring); padding:.6rem; border-radius:10px; font-family:var(--font-mono); font-size:.65rem; max-height:220px; overflow:auto; line-height:1.3; }
    :root[data-mode="ghoul"] .log { background:#ffffff05; }
    .hpbar { position:relative; background:var(--ring); height:10px; border-radius:6px; overflow:hidden; flex:1; }
    .hpbar span { position:absolute; inset:0; background:linear-gradient(90deg,var(--accent),#ff5c5c); width:100%; transition:width .35s; }
    .cols { display:grid; gap:1rem; }
    @media(min-width:680px){ .cols { grid-template-columns:1fr 1fr; } }
    button.action { font-size:.75rem; }
    #battleResult { font-size:.9rem; font-weight:600; }
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to content</a>
  <button id="modeToggle" aria-label="Switch mode" aria-pressed="false"><span class="icon" aria-hidden="true">ðŸŒ“</span><span class="txt">Human</span></button>
  <header class="app">
    <strong>Battle</strong>
    <nav class="row" style="gap:.5rem;">
      <a href="/dashboard.html" class="sec" style="font-size:.65rem; padding:.4rem .6rem;">Dashboard</a>
      <a href="/journal.html" class="sec" style="font-size:.65rem; padding:.4rem .6rem;">Journal</a>
      <a href="/profile.html" class="sec" style="font-size:.65rem; padding:.4rem .6rem;">Profile</a>
    </nav>
  </header>
  <main id="main">
    <section class="panel" id="battlePanel">
      <div class="cols">
        <div>
          <h2 style="margin:0;font-size:1rem;">You</h2>
          <div class="hpbar" aria-label="Player HP"><span id="playerHpBar"></span></div>
          <div class="statline" id="playerStats"></div>
        </div>
        <div>
          <h2 style="margin:0;font-size:1rem;">Enemy</h2>
            <div class="hpbar" aria-label="Enemy HP"><span id="enemyHpBar"></span></div>
            <div class="statline" id="enemyStats"></div>
        </div>
      </div>
      <div id="battleResult"></div>
      <div class="row" style="flex-wrap:wrap;">
        <button id="attackBtn" class="action" type="button">Attack</button>
        <button id="resetBtn" class="sec" type="button">New Battle</button>
      </div>
      <div class="log" id="battleLog" aria-live="polite"></div>
      <small style="opacity:.6;">Win awards +5 RC (cooldown 60s). Damage = max(1, ATK - 0.5*DEF) * rand(0.9..1.1)</small>
    </section>
    <section class="panel" id="historyPanel">
      <h2 style="margin:0;font-size:1rem;">Recent Battles</h2>
      <ul id="battleHistory" style="list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.4rem;font-size:.65rem;"></ul>
    </section>
  </main>
  <script type="module" src="/assets/js/app.js"></script>
  <script type="module" src="/assets/js/battle.js"></script>
</body>
</html>
